# CRAG

## 相比RAG的优势
自我反思可以增强 RAG，能够纠正检索质量差或生成质量差的问题。

## 过程

- 对检索到的文档进行整体评估：

- 正确文档 

  - 如果至少有一个文档的相关性超过了阈值(正确)，则继续进行生成

  - 在生成之前，执行知识精炼

    - 将文档划分为“知识条”

    - 对每个条进行评分，过滤掉不相关的条

- 模糊或不正确的文档

  - 如果所有文档都低于相关性阈值(不正确)，或者评审者不确定(模糊)，那么寻找额外的数据源

  - 将使用网络搜索来进行补充检索,并使用查询重写进行优化

![1750174122423](image/readme/crag.png)


## 本实现

- 完整地实现了[论文](https://arxiv.org/pdf/2401.15884)中的CRAG过程
  - 知识精炼：查询到的文档和web搜索到的内容都拆分成几句话的知识条进行精炼
    - 筛选掉不相关的条
  - 根据查询评估结果分类处理
